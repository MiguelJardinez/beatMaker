"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var Drumkit=function(){function a(){_classCallCheck(this,a),this.pads=document.querySelectorAll("div.pad"),this.playBtn=document.querySelector("button.play"),this.currentKick="../public/assets/sound/kick-classic.wav",this.currentSnare="../public/assets/sound/snare-acounstic01.wav",this.currentHihat="../public/assets/sound/hihat-acounstic01.wav",this.kickAudio=document.querySelector("audio.kick-sound"),this.snareAudio=document.querySelector("audio.snare-sound"),this.hithatAudio=document.querySelector("audio.hihat-sound"),this.index=0,this.bpm=150,this.isPlaying=null,this.selects=document.querySelectorAll("select"),this.muteBtns=document.querySelectorAll("button.mute"),this.bpmSlider=document.querySelector("input.bpm-slider")}return _createClass(a,[{key:"activePad",value:function(){this.classList.toggle("active")}},{key:"repeat",value:function(){var a=this,b=this.index%8,c=document.querySelectorAll("div.b".concat(b));c.forEach(function(b){b.classList.contains("active")?(b.style.animation="playTrack 350ms alternate cubic-bezier(0.48, 0.88, 0.43, 0.86)",b.classList.contains("kick-pad")&&(a.kickAudio.currentTime=0,a.kickAudio.play()),b.classList.contains("snare-pad")&&(a.snareAudio.currentTime=0,a.snareAudio.play()),b.classList.contains("hihat-pad")&&(a.hithatAudio.currentTime=0,a.hithatAudio.play())):b.style.animation="shines 500ms reverse linear forwards"}),this.index++}},{key:"start",value:function(){var a=this,b=1e3*(60/this.bpm);this.isPlaying?(clearInterval(this.isPlaying),this.isPlaying=null):this.isPlaying=setInterval(function(){a.repeat()},b)}},{key:"updateBtn",value:function(){this.isPlaying?(this.playBtn.innerText="Play",this.playBtn.classList.remove("active")):(this.playBtn.innerText="Stop",this.playBtn.classList.add("active"))}},{key:"changeSound",value:function(a){var b=a.target.name,c=a.target.value;"kick-select"===b?this.kickAudio.src=c:"snare-select"===b?this.snareAudio.src=c:"hihat-select"===b?this.hithatAudio.src=c:void 0}},{key:"mute",value:function(a){var b,c=a.target.getAttribute("data-track");a.target.classList.toggle("active")?(a.target.firstElementChild.innerText="volume_off",b=0):(a.target.firstElementChild.innerText="volume_up",b=1),"0"===c?this.kickAudio.volume=b:"1"===c?this.snareAudio.volume=b:"2"===c?this.hithatAudio.volume=b:void 0}},{key:"changeBpm",value:function(a){var b=document.querySelector(".bpm-value");this.bpm=a.target.value,b.innerText=a.target.value}},{key:"updateInterval",value:function(){clearInterval(this.isPlaying),this.isPlaying=null;var a=document.querySelector("button.play");a.classList.contains("active")&&this.start()}}]),a}(),drumKit=new Drumkit;drumKit.pads.forEach(function(a){a.addEventListener("click",drumKit.activePad),a.addEventListener("animationend",function(){this.style.animation=""})}),drumKit.playBtn.addEventListener("click",function(){drumKit.updateBtn(),drumKit.start()}),drumKit.selects.forEach(function(a){a.addEventListener("change",function(){drumKit.changeSound(event)})}),drumKit.muteBtns.forEach(function(a){a.addEventListener("click",function(a){drumKit.mute(a)})}),drumKit.bpmSlider.addEventListener("input",function(a){drumKit.changeBpm(a)}),drumKit.bpmSlider.addEventListener("change",function(a){drumKit.updateInterval(a)});