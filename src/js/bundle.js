"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _createSuper(a){return function(){var b,c=_getPrototypeOf(a);if(_isNativeReflectConstruct()){var d=_getPrototypeOf(this).constructor;b=Reflect.construct(c,arguments,d)}else b=c.apply(this,arguments);return _possibleConstructorReturn(this,b)}}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(c):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var Drumkit=function(){function a(){_classCallCheck(this,a),this.pads=document.querySelectorAll("div.pad"),this.playBtn=document.querySelector("button.play"),this.currentKick="../public/assets/sound/kick-classic.wav",this.currentSnare="../public/assets/sound/snare-acounstic01.wav",this.currentHihat="../public/assets/sound/hihat-acounstic01.wav",this.kickAudio=document.querySelector("audio.kick-sound"),this.snareAudio=document.querySelector("audio.snare-sound"),this.hithatAudio=document.querySelector("audio.hihat-sound"),this.index=0,this.bpm=150,this.isPlaying=null,this.selects=document.querySelectorAll("select"),this.muteBtns=document.querySelectorAll("button.mute"),this.bpmSlider=document.querySelector("input.bpm-slider")}return _createClass(a,[{key:"activePad",value:function(a){a.target.classList.toggle("active"),this.storeSequence(a)}},{key:"repeat",value:function(){var a=this,b=this.index%8,c=document.querySelectorAll("div.b".concat(b));c.forEach(function(b){b.classList.contains("active")?(b.style.animation="playTrack 350ms alternate cubic-bezier(0.48, 0.88, 0.43, 0.86)",b.classList.contains("kick-pad")&&(a.kickAudio.currentTime=0,a.kickAudio.play()),b.classList.contains("snare-pad")&&(a.snareAudio.currentTime=0,a.snareAudio.play()),b.classList.contains("hihat-pad")&&(a.hithatAudio.currentTime=0,a.hithatAudio.play())):b.style.animation="shines 500ms reverse linear forwards"}),this.index++}},{key:"start",value:function(){var a=this,b=1e3*(60/this.bpm);this.isPlaying?(clearInterval(this.isPlaying),this.isPlaying=null):this.isPlaying=setInterval(function(){a.repeat()},b)}},{key:"updateBtn",value:function(){this.isPlaying?(this.playBtn.innerText="Play",this.playBtn.classList.remove("active")):(this.playBtn.innerText="Stop",this.playBtn.classList.add("active"))}},{key:"changeSound",value:function(a){var b=a.target.name,c=a.target.value;this.storeChangeSound(a),"kick-select"===b?this.kickAudio.src=c:"snare-select"===b?this.snareAudio.src=c:"hihat-select"===b?this.hithatAudio.src=c:void 0}},{key:"mute",value:function(a){var b,c=a.target.getAttribute("data-track");a.target.classList.toggle("active")?(a.target.firstElementChild.innerText="volume_off",b=0):(a.target.firstElementChild.innerText="volume_up",b=1),this.storeMute(a),"0"===c?this.kickAudio.volume=b:"1"===c?this.snareAudio.volume=b:"2"===c?this.hithatAudio.volume=b:void 0}},{key:"changeBpm",value:function(a){var b=document.querySelector(".bpm-value");this.bpm=a.target.value,localStorage.setItem("bpm",a.target.value),b.innerText=a.target.value}},{key:"updateInterval",value:function(){clearInterval(this.isPlaying),this.isPlaying=null;var a=document.querySelector("button.play");a.classList.contains("active")&&this.start()}},{key:"storeSequence",value:function(a){var b=a.target.parentNode.getAttribute("data-index"),c=_toConsumableArray(a.target.parentNode.children).indexOf(a.target),d=JSON.parse(localStorage.getItem("sequence".concat(b)))||[];-1==d.indexOf(c)?d.push(c):d.splice(d.indexOf(c),1),localStorage.setItem("sequence".concat(b),JSON.stringify(d))}},{key:"storeChangeSound",value:function(a){localStorage.setItem(a.target.name,a.target.value)}},{key:"storeMute",value:function(a){var b;b=a.target.classList.contains("active")?0:1,localStorage.setItem("mute"+a.target.getAttribute("data-track"),b)}}]),a}(),drumKit=new Drumkit;drumKit.pads.forEach(function(a){a.addEventListener("click",function(a){drumKit.activePad(a)}),a.addEventListener("animationend",function(){this.style.animation=""})}),drumKit.playBtn.addEventListener("click",function(){drumKit.updateBtn(),drumKit.start()}),drumKit.selects.forEach(function(a){a.addEventListener("change",function(){drumKit.changeSound(event)})}),drumKit.muteBtns.forEach(function(a){a.addEventListener("click",function(a){drumKit.mute(a)})}),drumKit.bpmSlider.addEventListener("input",function(a){drumKit.changeBpm(a)}),drumKit.bpmSlider.addEventListener("change",function(a){drumKit.updateInterval(a)});var Dropdown=function(){function a(){_classCallCheck(this,a),this.helpButton=document.querySelector("span.help-info")}return _createClass(a,[{key:"activeDropDown",value:function(){this.nextElementSibling.classList.toggle("active")}}]),a}(),dropdown=new Dropdown;dropdown.helpButton.addEventListener("mouseenter",dropdown.activeDropDown),dropdown.helpButton.addEventListener("mouseleave",dropdown.activeDropDown);var ChangeTheme=function(){function a(){_classCallCheck(this,a),this.themeButton=document.querySelector("button.btn-theme")}return _createClass(a,[{key:"active",value:function(){this.themeButton.classList.toggle("active")?(this.themeButton.firstElementChild.innerText="brightness_7",this.setColor()):(this.themeButton.firstElementChild.innerText="brightness_5",this.setColor())}},{key:"setColor",value:function(){this.themeButton.classList.contains("active")?(document.body.classList.add("dark-theme"),localStorage.setItem("darkTheme",1)):(document.body.classList.remove("dark-theme"),localStorage.setItem("darkTheme",0))}}]),a}(),changeTheme=new ChangeTheme;changeTheme.themeButton.addEventListener("click",function(){changeTheme.active()});var SetLastState=function(a){function b(){var a;return _classCallCheck(this,b),a=c.call(this),a.sequence0=localStorage.getItem("sequence0"),a.sequence1=localStorage.getItem("sequence1"),a.sequence2=localStorage.getItem("sequence2"),a.bpm=localStorage.getItem("bpm"),a.darkTheme=localStorage.getItem("darkTheme"),a.snareSelect=localStorage.getItem("snare-select"),a.hithatSelect=localStorage.getItem("hihat-select"),a.kickSelect=localStorage.getItem("kick-select"),a.mute0=localStorage.getItem("mute0"),a.mute1=localStorage.getItem("mute1"),a.mute2=localStorage.getItem("mute2"),a}_inherits(b,a);var c=_createSuper(b);return _createClass(b,[{key:"setState",value:function(){}}]),b}(Drumkit),setLastState=new SetLastState;setLastState.setState();